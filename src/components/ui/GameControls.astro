---
import { getDeviceType } from "@/utils/mobile";
import type { GameConfig } from "@/config/types";
import OrientationNotice from "./orientation/OrientationNotice.astro";
import ControlsGuide from "./controls/ControlsGuide.astro";

interface Props {
  config: GameConfig;
  className?: string;
}

const { config, className = "" } = Astro.props;
const deviceType = getDeviceType();
---

<div class={`game-controls ${className}`}>
  {
    config.orientation === "landscape" && deviceType !== "desktop" && (
      <OrientationNotice />
    )
  }

  <ControlsGuide deviceType={deviceType} controls={config.controls} />
</div>

<style>
  .game-controls {
    position: relative;
    width: 100%;
    background: var(--color-background-lighter);
    border-radius: 0 0 1rem 1rem;
    overflow: hidden;
  }
</style>
