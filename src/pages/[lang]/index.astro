---
import { languages, defaultLang } from "@/i18n/config";
import BaseLayout from "@/layouts/BaseLayout.astro";
import Hero from "@/components/sections/Hero.astro";
import GameEmbed from "@/components/sections/GameEmbed.astro";
import Features from "@/components/sections/Features.astro";
import FAQ from "@/components/sections/FAQ.astro";

export function getStaticPaths() {
  return Object.keys(languages).map((lang) => ({
    params: { lang },
  }));
}

const { lang } = Astro.params;

// 如果访问默认语言的URL，重定向到根路径
if (lang === defaultLang) {
  return Astro.redirect("/");
}
---

<BaseLayout>
  <Hero />
  <GameEmbed />
  <Features />
  <FAQ />
</BaseLayout>
